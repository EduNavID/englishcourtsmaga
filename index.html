<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Court - SMAN 3 Lamongan</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display.swap" rel="stylesheet">
    
    <style>
        html { scroll-behavior: smooth; }
        body { font-family: 'Poppins', sans-serif; background-color: #f8fafc; }
        .card-hover { transition: transform 0.3s ease, box-shadow 0.3s ease; }
        .card-hover:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
        }
        .reveal {
            position: relative;
            transform: translateY(100px);
            opacity: 0;
            transition: 1s all ease;
        }
        .reveal.active { transform: translateY(0); opacity: 1; }
        .text-gradient {
            background: linear-gradient(to right, #818cf8, #a78bfa);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .nav-button {
            transition: transform 0.2s ease, background-color 0.2s ease, box-shadow 0.2s ease;
        }
        .nav-button:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.05);
            background-color: #f5f3ff; /* violet-50 */
        }
    </style>
</head>
<body class="min-h-screen">

    <!-- ========================================================== -->
    <!-- == BAGIAN UNTUK PENGUNJUNG UMUM (BELUM LOGIN)           == -->
    <!-- ========================================================== -->
    <div id="public-view">
        <!-- HEADER PALING ATAS -->
        <header class="bg-white/90 backdrop-blur-lg shadow-sm sticky top-0 z-50">
            <div class="container mx-auto px-4 sm:px-6 py-3 flex justify-between items-center">
                <a href="./index.html" class="flex items-center gap-3">
                    <img src="https://i.imgur.com/vOlASeq.png" alt="Logo SMAN 3 Lamongan" class="h-12 w-12">
                    <span class="text-xl font-bold text-blue-700">English Court</span>
                </a>
                <a href="./login.html" class="bg-blue-600 text-white font-bold px-5 py-2 rounded-lg hover:bg-blue-700 transition-all shadow-md">
                    Login / Gabung
                </a>
            </div>
        </header>

        <main>
            <!-- BACKGROUND (HERO SECTION) -->
            <section class="relative h-[50vh] md:h-[60vh] bg-cover bg-center text-white flex items-center justify-center" style="background-image: linear-gradient(rgba(10, 20, 40, 0.5), rgba(10, 20, 40, 0.5)), url('https://images.unsplash.com/photo-1523240795612-9a054b0db644?q=80&w=2070&auto-format&fit=crop');">
                <div class="text-center p-4">
                    <h1 class="text-4xl md:text-6xl font-extrabold leading-tight">Level Up Your English.</h1>
                    <h2 class="text-4xl md:text-6xl font-extrabold text-violet-300">Unleash Your Confidence.</h2>
                </div>
            </section>

            <!-- NAVBAR BARU YANG LEBIH FUN -->
            <nav class="bg-white shadow-lg -mt-16 relative z-30 mx-4 md:mx-auto max-w-5xl rounded-2xl p-4">
                <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-2 items-center">
                    <!-- Logo di Navbar -->
                    <a href="./index.html" class="col-span-2 lg:col-span-1 flex items-center gap-3 justify-center md:justify-start p-3">
                        <img src="https://i.imgur.com/vOlASeq.png" alt="Logo SMAN 3 Lamongan" class="h-12 w-12">
                        <div>
                            <p class="font-bold text-blue-700">English Court</p>
                            <p class="text-xs text-slate-500">SMAN 3 Lamongan</p>
                        </div>
                    </a>
                    <!-- Tombol Navigasi -->
                    <a href="#about" class="nav-button text-center p-4 rounded-lg flex flex-col items-center gap-2">
                        <span class="text-3xl">üßê</span>
                        <p class="font-semibold text-slate-700">Tentang Kami</p>
                    </a>
                    <a href="#programs" class="nav-button text-center p-4 rounded-lg flex flex-col items-center gap-2">
                        <span class="text-3xl">üöÄ</span>
                        <p class="font-semibold text-slate-700">Program</p>
                    </a>
                    <a href="./login.html" class="nav-button text-center p-4 rounded-lg bg-violet-500 text-white hover:bg-violet-600 flex flex-col items-center gap-2">
                        <span class="text-3xl">üëã</span>
                        <p class="font-bold">Gabung!</p>
                    </a>
                </div>
            </nav>

            <!-- Tentang Kami -->
            <section id="about" class="pt-20 pb-10 bg-white">
                <div class="container mx-auto px-6 grid md:grid-cols-2 gap-12 items-center">
                    <div class="reveal">
                        <img src="https://images.unsplash.com/photo-1522202176988-66273c2fd55f?q=80&w=2071&auto-format&fit=crop" class="rounded-2xl shadow-2xl w-full">
                    </div>
                    <div class="reveal">
                        <h2 class="text-3xl font-bold text-slate-800">Bukan Sekadar Ekskul Biasa.</h2>
                        <p class="text-slate-500 mt-4 text-lg">English Court adalah wadah bagi para siswa SMAN 3 Lamongan untuk tidak hanya belajar, tapi juga hidup dengan Bahasa Inggris. Kami percaya, kemampuan berbahasa adalah jembatan menuju dunia yang lebih luas.</p>
                        <p class="mt-4 text-slate-600">Di sini, kamu akan menemukan teman, mentor, dan tantangan yang akan mendorongmu keluar dari zona nyaman dan menjadi versi terbaik dari dirimu.</p>
                    </div>
                </div>
            </section>

            <!-- Program Unggulan -->
            <section id="programs" class="py-20 bg-slate-50">
                <div class="container mx-auto px-6 text-center">
                    <div class="reveal">
                        <h2 class="text-3xl font-bold text-slate-800">Program Unggulan Kami</h2>
                        <p class="text-slate-500 mt-2">Dari debat panas hingga karya kreatif, kami punya semuanya.</p>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mt-12">
                        <div class="reveal card-hover bg-white p-8 rounded-xl">
                            <h3 class="text-2xl font-bold text-gradient">Debate Club</h3>
                            <p class="mt-2 text-slate-600">Asah argumen, berpikir kritis, dan kuasai seni persuasi dalam sesi debat yang menantang.</p>
                        </div>
                        <div class="reveal card-hover bg-white p-8 rounded-xl">
                            <h3 class="text-2xl font-bold text-gradient">Speech & Storytelling</h3>
                            <p class="mt-2 text-slate-600">Taklukkan panggung, latih kepercayaan diri, dan pikat audiens dengan ceritamu.</p>
                        </div>
                        <div class="reveal card-hover bg-white p-8 rounded-xl">
                            <h3 class="text-2xl font-bold text-gradient">Creative Writing</h3>
                            <p class="mt-2 text-slate-600">Tuangkan imajinasimu dalam bentuk puisi, cerita pendek, dan karya sastra lainnya.</p>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- Footer Informatif -->
        <footer class="bg-slate-800 text-white">
            <div class="container mx-auto px-6 py-12">
                <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                    <div>
                        <h3 class="font-bold text-lg">English Court</h3>
                        <p class="mt-2 text-slate-400 text-sm">SMAN 3 Lamongan</p>
                    </div>
                    <div>
                        <h3 class="font-bold text-lg">Navigasi</h3>
                        <ul class="mt-2 space-y-2 text-sm">
                            <li><a href="#about" class="text-slate-400 hover:text-white">Tentang Kami</a></li>
                            <li><a href="#programs" class="text-slate-400 hover:text-white">Program</a></li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="font-bold text-lg">Kontak</h3>
                        <p class="mt-2 text-slate-400 text-sm">Jl. Veteran No. 45, Lamongan</p>
                        <p class="text-slate-400 text-sm">ec.smagala@email.com</p>
                    </div>
                    <div>
                        <h3 class="font-bold text-lg">Media Sosial</h3>
                        <div class="flex gap-4 mt-2">
                            <a href="#" class="text-slate-400 hover:text-white">Instagram</a>
                            <a href="#" class="text-slate-400 hover:text-white">YouTube</a>
                        </div>
                    </div>
                </div>
                <div class="border-t border-slate-700 mt-8 pt-6 text-center text-sm text-slate-500">
                    &copy; 2025 English Court SMAN 3 Lamongan. All Rights Reserved.
                </div>
            </div>
        </footer>
    </div>

    <!-- ========================================================== -->
    <!-- == BAGIAN UNTUK ANGGOTA (SUDAH LOGIN)                  == -->
    <!-- ========================================================== -->
    <div id="dashboard-view" class="hidden">
        <header class="bg-white/90 backdrop-blur-lg shadow-sm sticky top-0 z-50">
            <nav class="container mx-auto px-4 sm:px-6 py-3 flex justify-between items-center">
                <a href="./index.html" class="flex items-center gap-3">
                    <img src="https://i.imgur.com/vOlASeq.png" alt="Logo SMAN 3 Lamongan" class="h-12 w-12">
                    <span class="text-xl font-bold text-blue-700">English Court</span>
                </a>
                <div class="relative">
                    <button id="profile-button" class="flex items-center gap-2 group">
                        <div class="hidden sm:block text-right">
                            <p class="font-semibold text-sm text-slate-700" id="user-email-display">Memuat...</p>
                        </div>
                        <img id="profile-avatar" src="https://placehold.co/40x40/dbeafe/4338ca?text=U" alt="User Avatar" class="w-10 h-10 rounded-full border-2 border-slate-200 group-hover:border-blue-400 transition object-cover">
                    </button>
                    <div id="profile-dropdown" class="hidden absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-xl z-20 py-1">
                        <a href="./profil.html" class="flex items-center gap-3 px-4 py-2 text-sm text-slate-700 hover:bg-slate-100">Profil Saya</a>
                        <div class="border-t border-slate-100 my-1"></div>
                        <a href="#" id="logout-button" class="flex items-center gap-3 w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50">Logout</a>
                    </div>
                </div>
            </nav>
        </header>

        <main class="container mx-auto px-4 sm:px-6 py-8">
            <div class="bg-white p-6 sm:p-8 rounded-xl shadow-md mb-8">
                <h1 class="text-2xl sm:text-3xl font-bold text-slate-800" id="welcome-message">Selamat Datang!</h1>
                <p class="text-slate-600 mt-2">Ini adalah dasbor utamamu. Semua yang kamu butuhkan ada di sini.</p>
            </div>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
                <a href="./materi.html" class="card-hover block bg-white p-6 rounded-xl shadow-md">
                    <h3 class="text-xl font-bold text-blue-700">üìö Materi Belajar</h3>
                    <p class="text-slate-500 mt-1 text-sm">Akses semua modul dan catatan pertemuan.</p>
                </a>
                <a href="./tugas.html" class="card-hover block bg-white p-6 rounded-xl shadow-md">
                    <h3 class="text-xl font-bold text-green-700">üìù Kumpul Tugas</h3>
                    <p class="text-slate-500 mt-1 text-sm">Lihat daftar tugas dan unggah pekerjaanmu.</p>
                </a>
                <a href="./pengumuman.html" class="card-hover block bg-white p-6 rounded-xl shadow-md">
                    <h3 class="text-xl font-bold text-yellow-700">üì¢ Pengumuman</h3>
                    <p class="text-slate-500 mt-1 text-sm">Informasi terbaru seputar kegiatan EC.</p>
                </a>
                <a href="./profil.html" class="card-hover block bg-white p-6 rounded-xl shadow-md">
                    <h3 class="text-xl font-bold text-purple-700">üë§ Profil Saya</h3>
                    <p class="text-slate-500 mt-1 text-sm">Lihat dan atur informasi akun Anda.</p>
                </a>
            </div>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const SUPABASE_URL = 'https://jelcycdbdokcalsuptwm.supabase.co';
            const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImplbGN5Y2RiZG9rY2Fsc3VwdHdtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ0OTM0NTUsImV4cCI6MjA3MDA2OTQ1NX0.tjgC8FKPb8L3T84V5EyRg5KSc23zr0Kcb0w5VsP4d6I';
            
            const { createClient } = supabase;
            const supabaseClient = createClient(SUPABASE_URL, SUPABASE_KEY);

            const publicView = document.getElementById('public-view');
            const dashboardView = document.getElementById('dashboard-view');
            
            async function checkUserSession() {
                const { data, error } = await supabaseClient.auth.getSession();
                if (data.session) {
                    publicView.classList.add('hidden');
                    dashboardView.classList.remove('hidden');
                    setupDashboard(data.session.user);
                } else {
                    publicView.classList.remove('hidden');
                    dashboardView.classList.add('hidden');
                }
            }

            function setupDashboard(user) {
                const userEmailDisplay = document.getElementById('user-email-display');
                const welcomeMessage = document.getElementById('welcome-message');
                const logoutButton = document.getElementById('logout-button');
                const profileButton = document.getElementById('profile-button');
                const profileDropdown = document.getElementById('profile-dropdown');

                const userEmail = user.email;
                userEmailDisplay.textContent = userEmail;
                const username = userEmail.split('@')[0];
                welcomeMessage.textContent = `Welcome back, ${username}!`;

                logoutButton.addEventListener('click', async (e) => {
                    e.preventDefault();
                    await supabaseClient.auth.signOut();
                    window.location.reload();
                });

                profileButton.addEventListener('click', () => {
                    profileDropdown.classList.toggle('hidden');
                });
                
                window.addEventListener('click', (e) => {
                    if (profileButton && !profileButton.contains(e.target) && profileDropdown && !profileDropdown.contains(e.target)) {
                        profileDropdown.classList.add('hidden');
                    }
                });
            }

            function revealOnScroll() {
                const reveals = document.querySelectorAll('.reveal');
                for (let i = 0; i < reveals.length; i++) {
                    const windowHeight = window.innerHeight;
                    const elementTop = reveals[i].getBoundingClientRect().top;
                    const elementVisible = 150;
                    if (elementTop < windowHeight - elementVisible) {
                        reveals[i].classList.add('active');
                    } else {
                        reveals[i].classList.remove('active');
                    }
                }
            }

            window.addEventListener('scroll', revealOnScroll);

            checkUserSession();
            revealOnScroll();
        });
    </script>
</body>
</html>
